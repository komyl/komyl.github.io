---
import Layout from '../layouts/Layout.astro';
import CopyableField from '../components/CopyableField.astro';
import BankIcon from '../components/icons/BankIcon.astro';
import CryptoIcon from '../components/icons/CryptoIcon.astro';

const bankDetails = { /* ... (unchanged) ... */ };

// New, more structured data for crypto
const cryptoDetails = [
    { name: 'BTC', symbol: 'BTC', address: 'bc1qeq26j9hdxtsras9ascenjp4kx23yqmdxru8mle' },
    { name: 'ETH', symbol: 'ETH', address: '0xC29E9eF7E9eEdFD2AdA25a342Cb421b5Baf7BAe5' },
    { name: 'TON', symbol: 'TON', address: 'UQDX6qPcmWE9Ko2HWqYtJCXiaIPel-WUJvIADY7OwjaunXWL' },
    { name: 'TRON', symbol: 'TRON', address: 'TPokJ9MFzJyXxUoTnJcJciHZZZZJ4Qraoq' },
    { name: 'BNB', symbol: 'BNB', address: '0xC29E9eF7E9eEdFD2AdA25a342Cb421b5Baf7BAe5', network: 'Smart Chain (BEP20)' },
];
const usdtDetails = [
    { network: 'TRC20', address: 'TPokJ9MFzJyXxUoTnJcJciHZZZZJ4Qraoq', warning: 'Use TRC20 Network' },
    { network: 'ERC20', address: '0xC29E9eF7E9eEdFD2AdA25a342Cb421b5Baf7BAe5', warning: 'Use ERC20 Network' },
];

const bmcScript = `<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="Komyl" data-color="#FFDD00" data-emoji="â˜•"  data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ><\/script>`;
---
<Layout title="Support Me" description="Support my work through various channels.">
    <div class="support-page">
        <h1>Support My Work</h1>
        <p class="subtitle">Your support helps me dedicate more time to open source projects and creating content. Thank you for considering.</p>

        <section class="card">
            </section>

        <section class="card">
            <div class="card-header">
                <h2>Cryptocurrency</h2>
            </div>
            <div class="card-content">
                {cryptoDetails.map(item => (
                    <div class="crypto-item">
                        <CryptoIcon name={item.symbol} />
                        <CopyableField label={item.name} value={item.address} />
                    </div>
                ))}
                <div class="usdt-section">
                    <div class="crypto-item">
                        <CryptoIcon name="USDT" />
                        <span class="usdt-label">USDT</span>
                    </div>
                    <div class="usdt-networks">
                        {usdtDetails.map(item => (
                            <div class="usdt-network-item">
                                <CopyableField label={item.network} value={item.address} />
                                <small class="warning">{item.warning}</small>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </section>

        <section class="card">
            <div class="card-header">
                <h2>Platforms</h2>
            </div>
            <div class="card-content platforms">
                <a href="https://www.patreon.com/bePatron?u=132443438" target="_blank" rel="noopener noreferrer" class="platform-button patreon">
                    Become a Member on Patreon
                </a>
                <div class="bmc-wrapper" set:html={bmcScript}></div>
            </div>
        </section>
    </div>
</Layout>

<style>
.support-page h1 { font-size: 3rem; margin-bottom: var(--spacing-unit); }
.subtitle { font-size: 1.2rem; color: var(--color-text-muted); max-width: 65ch; margin-bottom: calc(var(--spacing-unit) * 6); }
.card {
    background-color: var(--glass-background);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-large);
    padding: calc(var(--spacing-unit) * 3);
    margin-bottom: calc(var(--spacing-unit) * 4);
}
.card-header {
    display: flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 2);
    margin-bottom: calc(var(--spacing-unit) * 3);
    color: var(--color-text);
}
.card-header h2 { font-size: 1.8rem; font-weight: 600; margin: 0; }
.bank-info {
    display: flex; flex-wrap: wrap;
    gap: calc(var(--spacing-unit) * 3);
    margin-top: calc(var(--spacing-unit) * 3);
    padding-top: calc(var(--spacing-unit) * 2);
    border-top: 1px solid var(--glass-border);
    font-size: 0.9rem; color: var(--color-text-muted);
}
.crypto-item {
    display: grid;
    grid-template-columns: 24px 1fr; /* Icon | Field */
    align-items: center;
    gap: calc(var(--spacing-unit) * 2);
    margin-bottom: var(--spacing-unit);
}
.usdt-section {
    margin-top: calc(var(--spacing-unit) * 3);
    padding-top: calc(var(--spacing-unit) * 2);
    border-top: 1px solid var(--glass-border);
}
.usdt-label {
    font-weight: 600;
}
.usdt-networks {
    padding-left: calc(24px + var(--spacing-unit) * 2); /* Indent under the main USDT icon */
}
.usdt-network-item {
    margin-bottom: var(--spacing-unit);
}
small.warning {
    font-size: 0.75rem;
    color: #ffcc00; /* Apple Yellow */
    margin-top: calc(var(--spacing-unit) * -1);
    padding-left: calc(var(--spacing-unit) * 1.5);
}
/* --- STYLES FOR THE FIX --- */
.platforms {
    display: flex;
    justify-content: center; /* Center the buttons */
    align-items: center;
    flex-wrap: wrap;
    gap: calc(var(--spacing-unit) * 3);
}
.platform-button {
    display: inline-block;
    padding: 12px 24px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: transform 0.2s ease;
}
.platform-button:hover {
    transform: scale(1.05);
}
.patreon {
    background-color: #ff424d;
    color: white;
}
.bmc-wrapper {
    /* The BMC button has its own styling, we just make sure it's aligned */
}
</style>