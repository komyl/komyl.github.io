---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map(project => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---
<Layout title={project.data.name} description={`Details for ${project.data.name}`}>
	<div class="page-header">
		<a href="/" class="back-button">&larr; Back to Home</a>
		{project.data.url && (
			<a href={project.data.url} class="github-button" target="_blank" rel="noopener noreferrer">
				View on GitHub
			</a>
		)}
	</div>
	<article class="prose">
		<h1>{project.data.name}</h1>
		<hr>
		<Content />
	</article>
</Layout>
<style>
/* Add the necessary styles for the detail page */
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: calc(var(--spacing-unit) * 4);
}
.back-button, .github-button {
    color: var(--color-text-muted);
    text-decoration: none;
    padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
    border-radius: var(--spacing-unit);
    transition: background-color 0.2s ease;
}
.back-button:hover, .github-button:hover {
    background-color: var(--glass-border);
    color: var(--color-text);
}
.github-button {
    background-color: var(--glass-background);
    border: 1px solid var(--glass-border);
}
.prose {
    max-width: 75ch;
    margin: 0 auto;
}
</style>